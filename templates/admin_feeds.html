<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>EURO_GOALS â€“ Admin Feeds Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="/static/icon_blue.png">
  <link rel="stylesheet" href="/static/css/style_dark.css">
</head>
<body>

  <h1>ğŸ“¡ Admin Feeds Panel</h1>

  <table>
    <thead>
      <tr>
        <th>Feed</th>
        <th>ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·</th>
        <th>Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯Î± ÎµÎ½Î·Î¼Î­ÏÏ‰ÏƒÎ·</th>
        <th>Î›ÎµÏ€Ï„Î¿Î¼Î­ÏÎµÎ¹ÎµÏ‚</th>
      </tr>
    </thead>
    <tbody id="feedTable">
      <tr><td colspan="4">Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½...</td></tr>
    </tbody>
  </table>

  <div id="timestamp">Î‘Î½Î±Î¼Î¿Î½Î® Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½...</div>

  <div class="status-bar">Î Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ· feeds ÎºÎ¬Î¸Îµ 60 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±</div>

  <script>
    async function loadFeeds() {
      try {
        const response = await fetch("/feeds_status");
        if (!response.ok) throw new Error("Î£Ï†Î¬Î»Î¼Î± HTTP " + response.status);
        const data = await response.json();
        const tbody = document.getElementById("feedTable");
        tbody.innerHTML = "";

        data.forEach(feed => {
          const row = document.createElement("tr");
          row.className = feed.status === "OK" ? "normal" : "alert";

          row.innerHTML = `
            <td>${feed.name}</td>
            <td>${feed.status}</td>
            <td>${feed.last_update || "-"}</td>
            <td>${feed.details || ""}</td>
          `;
          tbody.appendChild(row);
        });

        document.getElementById("timestamp").innerText =
          "Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯Î± ÎµÎ½Î·Î¼Î­ÏÏ‰ÏƒÎ·: " + new Date().toLocaleTimeString("el-GR");

      } catch (err) {
        console.error("Î£Ï†Î¬Î»Î¼Î±:", err);
        const tbody = document.getElementById("feedTable");
        tbody.innerHTML = `<tr class="alert"><td colspan="4">âŒ Î£Ï†Î¬Î»Î¼Î± Ï†ÏŒÏÏ„Ï‰ÏƒÎ·Ï‚ feeds</td></tr>`;
        document.getElementById("timestamp").innerText = "âŒ Î ÏÏŒÎ²Î»Î·Î¼Î± Ï†ÏŒÏÏ„Ï‰ÏƒÎ·Ï‚ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½";
      }
    }

    loadFeeds();
    setInterval(loadFeeds, 60000);
  </script>

  <div class="footer">EURO_GOALS Admin Feeds Panel v8.9g Â© 2025</div>

</body>
</html>
